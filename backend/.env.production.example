# Backend Production Environment Variables Template
# Copy this file to .env.production and fill in the actual values

# ============================================================
# Database Configuration
# ============================================================

# Database connection URL for Cloud SQL
# Format: mysql+pymysql://username:password@host:port/database
# For Cloud Run with VPC Connector: Use private IP of Cloud SQL instance
# Example: mysql+pymysql://app_user:YOUR_PASSWORD@10.x.x.x:3306/app_db
DATABASE_URL=mysql+pymysql://app_user:YOUR_DB_PASSWORD@CLOUD_SQL_PRIVATE_IP:3306/app_db

# ============================================================
# Application Configuration
# ============================================================

# Environment mode (should be "production" in production)
FLASK_ENV=production

# Frontend URL for CORS configuration
# This should be the Cloud Storage static website URL
# Example: https://storage.googleapis.com/your-bucket-name
FRONTEND_URL=https://storage.googleapis.com/YOUR_BUCKET_NAME

# ============================================================
# JWT Authentication Configuration
# ============================================================

# JWT secret key for token signing (REQUIRED - generate a strong random key)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
JWT_SECRET_KEY=YOUR_STRONG_SECRET_KEY_HERE

# JWT algorithm (optional, default: HS256)
# JWT_ALGORITHM=HS256

# Access token expiration time in minutes (optional, default: 1440 = 1 day)
# ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Refresh token expiration time in days (optional, default: 7 days)
# REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================
# Logging Configuration (Optional)
# ============================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO for production
# LOG_LEVEL=INFO

# Log directory (optional, default: backend/logs)
# For Cloud Run, logs are automatically sent to Cloud Logging
# LOG_DIR=/var/log/app

# ============================================================
# Rate Limiting Configuration (Redis)
# ============================================================

# Enable rate limiting (true/false, default: false)
# When enabled, requires Redis connection
RATE_LIMIT_ENABLED=true

# Redis host (Memorystore instance IP)
# For Cloud Run: Use private IP of Memorystore Redis
# Example: 10.x.x.x
REDIS_HOST=YOUR_REDIS_HOST_IP

# Redis port (default: 6379)
REDIS_PORT=6379

# Redis password (AUTH string from Memorystore)
# Get from Terraform output: terraform output -raw redis_auth_string
REDIS_PASSWORD=YOUR_REDIS_AUTH_STRING

# ============================================================
# Notes for Production Deployment
# ============================================================
#
# 1. Never commit this file with actual values to Git
# 2. Use GitHub Secrets or Cloud Secret Manager to store sensitive values
# 3. For Cloud Run, set environment variables via:
#    - Terraform: google_cloud_run_service resource env block
#    - gcloud: --set-env-vars flag
#    - GitHub Actions: --update-env-vars in deployment step
#
# 4. Generate strong random values for JWT_SECRET_KEY:
#    python -c "import secrets; print(secrets.token_hex(32))"
#
# 5. Database URL should use private IP when connecting via VPC Connector
#    (Cloud Run cannot access Cloud SQL public IP)
#
# 6. FRONTEND_URL must match the actual Cloud Storage URL for CORS to work
#
